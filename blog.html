<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Alex Kalams Portfolio</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- header -->
			<header id="header">
				<a href="/" class="title">Alex Kalams</a>
				<nav>
					<ul>
						<li><a href="/" class="active">Home</a></li>
						<li><a href="games">Games</a></li>
						<li><a href="projects">Projects</a></li>
						<li><a href="work">Work</a></li>
					</ul>
				</nav>
			</header>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Intro -->
					<section id="Intro" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
							<h1>Introduction</h1>
							
							<p>Welcome to my blog for the Fall 2023 Wolverine Soft dev cycle. Here is where I will keep my notes from each sprint and what I worked on each week!</p>
						
							<ul class="actions">			
								<li><a href="#one" class="button scrolly">Blog 1 (9/24-10/8)</a></li>
								<li><a href="#two" class="button scrolly">Blog 2 (10/8-10/22)</a></li>
								<li><a href="#three" class="button scrolly">Blog 3 (10/22-11/5)</a></li>
								<li><a href="#four" class="button scrolly">Blog 4 (11/5-11/19)</a></li>
								<li><a href="#five" class="button scrolly">Blog 5 (11/19-12/3)</a></li>
							</ul>
						</div>
					</section>
				
				<!-- Blog 5 -->
				<section id="five" class="wrapper style2">
					<div class="inner">
						<h1>Blog 5 (11/19-12/3) - Thanksgiving Break and the Final QA Week</h1>
						<h2>Introduction</h2>
						<p>The showcase is just around the corner! That means that the team has one last chance to fix bugs and add that last bit of polish. The first half of this 2 week cycle was also Thanksgiving, which was a great chance for us to unwind before this busy week!</p>
						<h2>Meetings (4 hours)</h2>
						<p>We had two, two hour meetings during this 2 week period. One QA check-in on the 29th and one wrap-up meeting on the 3rd.</p>

						<h2>Bug Hunting (2 hours)</h2>
						<p>A large portion of the QA process this week was running our own playtests to find bugs to squash. Since I was assigned to the AI, my playtesting sessions consisted of playing against the AI repeatedly. Throughout this process, I was able to locate a few bugs and then determine the proper steps to reproduce them.</p>

						<h2>AI Movement Bugs (2 hours)</h2>
						<p>The largest bug I had to tackl was a bug with how the AI handled moving. If you remember from my last blog, the AI had an issue with moving units beyond their movement limit. While I fixed this issue for terrain which did not obstruct movement, I forgot to consider the scenario where a unit is travelling over difficult terrain.</p>

						<p>This bug would lead to the Swordsman moving over mountains despite mountains intended design to slow ground units down. I figured out that the reason for this bug was in how the AI handles intermediate spaces when moving units long distances. Rather than considering the cost of moving to a tile, the AI would only consider the number of tiles it had to cross. For example, if the AI had a movement with a move range of 5 and wanted to move it to a city 5 tiles away, it would ignore the fact that a mountain in the path increases the cost of the path beyond 5.</p>

						<center><video autoplay muted loop><source src="images/IncorrectMountain.mp4"></video><video autoplay muted loop><source src="images/CorrectMountain.mp4"></video></center>
						<center><i><p>Shown on the left is the incorrect behavior, the unit paths across the mountains like they are not there. On the right is the correct behavior, where the unit only travels one square before stopping.</p></i></center>

						<p>Another issue in the movement was with the escape behavior. When escaping a unit, the AI tries to determine the average direction of its opponent's units so it can flee away from them. The issue is that if the direction takes a unit off the board, it will cause a null reference exception and break the AI. To fix this issue, I added a check to the target square that the unit is attempting to escape to to make sure that is valid. If it isn't, the closest valid square is used instead.</p>

						<h2>AI Attack Range Bug (1 hours)</h2>
						<p>This issue was a bug reported by one of our designers while they were testing. The AI's units could attack units outside of its attack range. This occurred because an individual unit's attack range was being scaled based the size of tiles. This was done as an efficient shortcut to figure out what enemies were in a unit's attack range. However, this messes up the AI's range calculations since it assumes that the range refers to tiles.</p>

						<p>Fixing this issue was easier said than done because changing this value without considering its consequences could break several other systems. Before changing the number, I consulted the programmers responsible to ensure that I was not breaking anything. After getting their approval, I made the unit's range only scale when necessary instead of being stored as a scaled value.</p>

						<center><video autoplay muted loop><source src="images/OutRange.mp4"></video></center>
						<center><i><p>Enemy unit attacks another unit beyond its attack range</p></i></center>

						<h2>Misc Issues (1 hours)</h2>
						<p>Along with the above bugs, I had a couple minor fixes to make.</p>

						<p>First, the AI could sometimes stack its units on the same tiles. This bug would occur when the AI was finding an intermediate space to move to. I fixed the issue by adding an extra check to make sure the intermediate tile is not occupied.</p>

						<p>Another bug allowed the AI to purchase multiple units from the same city in a turn, because it was not checking if units had already been purchased from a partificular city.</p>

						<h2>Conclusion</h2>
						<p>In total I spent 10 hours these past two week on Wolverine Soft. I am proud of my work this semester and am looking forward to the showcase!</p>
					</div>
				</section>

				<!-- Blog 4 -->
				<section id="four" class="wrapper style1">
					<div class="inner">
						<h1>Blog 4 (11/5-11/19) - Systems, Behaviors, and Bugfixes</h1>
						<h2>Introduction</h2>
						<p>As the name suggests, these past two weeks had me working on new systems, new AI behaviors, and some bugfixes as well. Let's dive into it!</p>

						<h2>Meetings (4 hours)</h2>
						<p>Two meetings. Two hours each. You know the drill.</p>

						<h2>Finishing the AI Tile System (5 hours)</h2>
						<p>Last week, I teased that I was working on a new system that would allow the AI to evaluate the state of the board to find the best positions to place its units. These last two weeks gave me the chance to finish them!</p>

						<p>The system works by iterating through each tile on the map and calculating information about those tiles. The system will account for nearby objectives, nearby enemies, and how dangerous a tile is. Once these values are calculated for each tile, the actual tile score is dependant on the unit which is evaluating that position. For example, units that prioritize objectives are more likely to move towards tiles near objectives. Units with low health, will avoid dangerous tiles.</p>

						<p>To help me debug, I also created a nifty editor tool which takes a unit type and health as input. The tool will then highlight tiles on the map based on how units score that tile, with red squares being more valuable and blue squares being less valuable. Hopefully, this tool will give designers a better understanding of how the AI is making its decisions so we can make it as smart as possible.</p>
						<center><video autoplay muted loop><source src="images/TileWeight_1.mp4"></video></center>
						<p></p>
						<p>One downside of the system is that it is rather computationally expensive. I will have to make improvements to make it more efficient in the coming weeks.</p>

						<h2>Archmage Teleport Behavior (6 hours)</h2>
						<p>The largest task I had this week was working on a behavior so the AI could use the Archmage's special ability. Unlike the other two specials, the Archmage's behavior cannot easily be created using other behaviors. Instead, I had to create two brand new behaviors.</p>

						<p>Since this was a rather complex task, I had to break it down into smaller, more digestible chunks. The AI first needed to move the Archmage near two ally units. The Archmage then needed to pick a valid square to teleport to once it was adjacent to enough allies. Finally, the Archmage would have to teleport itself and adjacent allies to the square it deems best.</p>

						<p>Once I understood what I needed to do, the problem became much more approachable. I began with the question of how the AI should pick the square to teleport to. Thankfully, since I had already been working on the tile weighting system, this was pretty easy to implement. The Archmage would pick tiles near objectives and enemies.</p>

						<p>I next worked on the mechanics of executing the behavior. To do this, I tracked the list of adjacent allies in an array along with the directions they were from the Archmage. Once I had this data structure set up, implementing it was as easy as moving each unit alongwith the Archmage.</p>

						<p>Lastly, I created a simple behavior that would check for nearby allies that were grouped up. If the Archmage could move near them, it would. This video shows the results from my work!</p>
						<center><video autoplay muted loop><source src="images/ArchmageBehavior.mp4"></video></center>
						<p></p>
						<h2>Healing, Key Locations, and Artifacts (3 hours)</h2>
						I had some other smaller AI behaviors assigned to me as well.

						One was a behavior that would allow the AI to move its units to its cities when they are low on health. This strategy was pretty simple to implement, requiring me to check if a unit's health is below a certain threshold. The lower a unit's health, the more likely it is to retreat to a city to heal.

						I also had to make the AI consider key locations and artifacts in its strategies. Since key locations and artifacts behave similar to cities, I chose to create a new data structure called a AICapturable state. This base structure would contain the tile a capturable belongs to, a list of nearby allies, and a list of nearby enemies. I then created children of this data structure for each type of capturable (cities, key locations, and artifacts). Once this structure had been created, scoring for behaviors could be reused across different types of capturables.
						<p></p>
						<h2>AI Movement Bugfix (1 hour)</h2>
						<p>The last thing I worked on this week was a bugfix that had been haunting the AI for some time. Basically, units would sometimes ignore their movement limitations and hilariously treck across the entire map in a single move.</p>

						<p>This behavior was curious since the AI was supposed to find the best intermediate for a square if the AI could not reach its target tile in one turn. While diving into the code in the debugger, I found that the intermediate tile was not being properly set, causing the AI to still move to its goal destination even if it was outside a unit's move range.</p>

						<center><video autoplay muted loop><source src="images/IncorrectBehavior.mp4"></video></center>
						<center><i><p>The incorrect movement behavior. Look at those units go!</p></i></center>
						<p></p>
						<center><video autoplay muted loop><source src="images/CorrectBehavior.mp4"></video></center>
						<center><i><p>The correct movement behavior.</p></i></center>
						<p></p>

						<h2>Conclusion</h2>
						<p>I spent a total of 19 hours this week. I am looking forward to finishing out the project and the semester in the coming weeks!</p>
					</div>
				</section>	
				
					<!-- Blog 3 -->
				<section id="three" class="wrapper style2">
					<div class="inner">
						<h1>Blog 3 (10/22-11/5) - More AI</h1>
						<h2>Introduction</h2>
						<p>These past two weeks have given me the chance to fully immerse myself in the AI systems. I have been finishing up a couple AI strategies while also starting on a new system that will hopefully help our AI make better decisions.</p>
						
						<h2>Meetings (4 hours)</h2>
						<p>As usual, we had our weekly studio meetings to discuss planned features and playtest the current build.</p>

						<h2>AI Purchase Behavior (6 hours)</h2>
						<p>During week 2 of sprint 2, I was tasked with finishing up the purchase behavior for the AI. If you remember last week, I had written a formula to help calculate the best unit to spawn and wheret to spawn it. This week, I just had to implement it.</p>

						<p>I began by figuring out a way to calculate the best unit to fit in a team comp. First, the AI calculates what its current unit composition is. It should ideally strive for 50% melee units, 30% ranged units, and 20% aerial units. If a unit helps the AI get closer to this target, it will be more likely to purchase that unit.</p>

						<p>When determining how to counter the enemy's composition, the AI will look at the proportion of the player's army that is weak to ranged and the proportion that is weaked to air units. If the player has a larger proportion of units weak to a certain type than the AI has to counter it, then the AI will prioritize purchasing the countering unit.</p>

						<p>The last element to implement was the location score. The AI should prioritize purchasing units where the AI is outnumbered by the player. To check for this, I used the AICityState implemented previously in the code base which tracks nearby allies and enemies. A strategy will lose score for placing units where the AI outnumbers the player and gain points where the player outnumbers the AI.</p>
						
						<center><video autoplay muted loop><source src="images/City Purchase.mp4"></video></center>
						<p></p>
						<h2>AI Commander Special Behaviors (6 hours)</h2>
						<p>My major task for week 1 of sprint 3 was to give the AI the ability to consider and use their commander's special ability. I started with the Swordmaster's second attack ability and the Old King's spawn unit ability.</p>

						<p>To maintain DRYness, I decided to implement the strategy for the Swordmaster's second attack within attack strategy. Theoretically, the Swordmaster's decision to use their second attack should take into account all the factors that caused them to do their first attack. Adding this behavior required the AI to check for the Second Attack ability on each unit. If a unit could attack again and had already attacked, it would consider a second attack strategy</p>

						<p>I had a similar idea of maintaining DRYness with the Old King. Since the Old King's ability effectively turns him into a city, I decided to implemented his special behavior inside the purchase strategy. I accomplished this by overloading the AICityState constructor with a set of parameters that accepts a commander instead of a city. The AI was also supposed to prioritize purchasing unit with the Old King over cities since those units will be more powerful, so I added an extra check that prevented purchase strategies from cities being created if the Old King had a special charge.</p>

						<center><img src="images/Old King Constructor.jpg" width="800" height="600"></center>
						<p></p>

						<p>However, working on these features was not a smooth process. Early on this week, I was running into a gamebreaking bug where the AI would break when attempting to capture cities. I couldn't figure out why this was happening, even when stepping through the debugger, so I decided to ask the other programmers on the team for help. After some investigating, I learned that a change had been made so that the commanders no longer could capture cities. However, the AI would still attempt to use commanders for capturing cities, causing the game to stall indefinately. Fixing this problem was as easy as adding an extra check in the city capturing strategy, but it was a good lesson to always stay in the loop about design decisions.</p>

						<h2>AI Scriptable Objects (2 hours)</h2>
						<p>My last small task for the second week was to move some of the weights and multipliers which score AI behavior out of scripts and into scriptable objects. This will hopefully help our designers better tune the AI without needing to dive into the code themselves. I also made sure to provide helpful tooltips for everything designers know what they need to modify to change the AI's behavior.</p>
					
						<center><video autoplay muted loop><source src="images/ScriptableObjectsSmall.mp4"></video></center>
						<p></p>

						<h2>AI Tile Weighting System (1 hour)</h2>
						<p>Next week, I plan to finish a system which will allow the AI to evaluate the importance of each tile on the board. I began creating it this week, but won't finish until next week. Stay tuned to learn more about this nifty system!</p>

						<h2>Conclusion</h2>
						<p>I spent a total of 19 hours this week. I feel happy with my progress and am excited to continute to refine the AI system in our game!</p>
					</div>
				</section>	

				<!-- Blog 2 -->
				<section id="two" class="wrapper style1">
					<div class="inner">
						<h1>Blog 2 (10/8-10/22) - Bugfixing and AI</h1>
						<h2>Introduction</h2>
						<p>After getting back from my vacation, I was excited to get to get back into the swing of things in person at Wolverine Soft. These past two weeks consisted of our first QA sprint and the first half of our second feature sprint.</p>

						<h2>Meetings (4 hours)</h2>
						<p>These past two weeks had two studio meetings where we playtested a build and took notes on bugs we had and changes that needed to be made. These sessions informed what needed to be fixed in the sprint that week.</p>

						<h2>Camera Improvements (4 hours)</h2>
						<p>One of my major tasks for the QA week was polishing up the camera panning feature and adding some new features. One change I had to make was adding in the ability to double click on a unit or city to have the camera snap to it. I also had to add tooltips for all the variables that could be tweaked on the camera's movement.</p>

						<p>One of the problems I faced was with the way we handle raycasts intersecting with units. To prevent the unit from blocking the square behind it, we disable some interactions with it once it has been selected. To work around this, I had to find the script that handled unit selection and add a workaround to enable camera snapping.</p>

						<center><video autoplay muted loop><source src="images/Camera Snapping.mp4"></video></center>

						<p>Another important aspect of implementing this feature was adding sufficient customizability in editor so designers could tinker with the camera as they needed. This meant serializing things like the pan and zoom speed. To insure that the designers knew what each variable meant, I went back through and added appropriate tooltips to each variable.</p>

						<h2>Exhaust System Bug Fix (2.5 hours)</h2>
						<p>Along with fixing the camera, I was also tasked with fixing how units spawned. Newly spawned units would be able to move and attack when they should spawn exhausted.</p>

						<p>After running through the code in the debugger, I figured out that despite units being initialized as exhausted in the component, they would still spawn as if they had not moved or attacked. To fix this, I added a line in their script which would set them to exhausted on spawn. I also had to add an exception to commanders, since they should be able to move on their first turn.</p>

						<h2>AI Purchase Strategy (5 hours)</h2>
						<p>My task for week 1 of Sprint 2 was to implement the purchasing strategy for the AI player. This required me to read through both the design documentation on the AI as well as the AI scripts to understand how to implement strategies.</p>

						<p>Implementing this strategy has several intricacies since its value is dependent on a variety of factors. The power of the unit is the first thing considered, with the AI prioritizing more powerful units. The AI will also consider its current composition, seeking a balance of melee, ranged, and aerial units. The AI will also consider how it can counter its opponents forces. Taking these points in mind, I developed a starting formula to implement this coming week:</p>
						
						<center><img src="images/AI Purchase Formula.jpg" width="1200" height="300"></center>

						<h2>Conclusion</h2>
						<p>In total I spent 15.5 hours these past two weeks. I am excited to start working with the AI system and look forward to finishing up my strategies next week.</p>
					</div>
				</section>	
				<!-- Blog 1 -->
					<section id="one" class="wrapper style2">
						<div class="inner">
							<h1>Blog 1 (9/24-10/8) - A Sprint from Greece</h1>
							<h2>Introduction</h2>
							<p>This sprint was a hectic one, with me being in Greece for the entirety of the two weeks for my sister's wedding. However, it was still a blast to hop back into Multiply after working on it over the Summer!</p>
							<span class="image fit"><img src="images/greece.jpg"></span>

							<h2>Meetings (2.5 hours)</h2>
							<p>I attended the meeting at the beginning of the sprint where goals for the week were dicussed and initial tasks were assigned. Unfortunately, I was not able to attend the second meeting because of travel.</p>

							<h2>Exhaust System Improvements (2 hours)</h2>
							<p>At the beginning of this sprint, I worked on touching up the exhaust system I worked on at the end of the Summer. This system is responsible for ending the players turn automatically when they run out of possible actions. The system functions by counting up the number of units and cities a player has at the beginning of their turn. Each time a city or unit is exhausted the number of available unit is ticked down 1. When that number reaches zero, the turn ends</p>
							<p>One shortcoming of my initial design of the system was that it only counted a unit as exhausted if it both moved and attacked. If a unit moved but had no enemies it could attack, it would not exhaust. Fixing this bug required me to dig through the documentation and code for units. While digging through, I found a function that someone implemented which would generate a list of all available enemies a unit could attack in its current square. Using this method, I was able to check for possible attacks after a unit moved. If there were no possible attacks, the unit would be exhausted.</p>
							<center><img src="images/exhaust.gif" width="600" height="350"></center>

							<h2>Camera Panning (3 hours)</h2>
							<p>As maps get bigger, having a fixed camera position will become increasingly impractical. Having camera panning is an important feature to allows players to focus in on specific parts of the battlefield.</p>
							<p>Implementing this feature required me to tie the translation of the camera position to the position of the mouse on the screen. This required me to research how to get the mouse position in Unity, and then how to figure out if the mouse is located on the edge of the screen. I also had to read through the grid spawner script to understand how to access the map size, since that would affect the bounds of the camera.</p>
							<p>One problem I ran into came up while implementing the zoom. Since our camera uses orthographic projection, simply moving the camera will not create the desired zoom effect. After consulting the rest of the programming team, one suggestion made was to change the orthographic projection size, which did achieve the results I wanted.</p>
							<center><video autoplay muted loop><source src="images/Pan.mp4"></video></center>
						
							<h2>Custom Room Options (1 hours)</h2>
							<p>My final task for the sprint was adding the custom room option to set the starting currency for each player. Implementing this feature required me to use Photon's custom room properties feature, which stores custom properties in a dictionary that can accessed by any players in the room. I then just had to add a selector to the room creation UI that would modify this value.</p>
							<center><img src="images/StartCurrency.jpg"></center>

							<h2>Documentation Review (2 hours)</h2>
							<p>Since I finished all my tasks quickly this week, I spent some extra free time reviewing the documentation for Project Multiply. I mainly looked into the Custom Serialization and Turn Game Manager systems since those are systems I will work with a lot in the future.</p>

							<h2>Conclusion</h2>
							<p>In total I spent 10.5 hours on Wolverine Soft this week. Unfortunately, this is under my required 18 hours per a week. This is mainly caused by me having not much free time since I was travelling. However, this week was also an indication that I should push myself more in the coming sprints to take on more tasks.</p>
						</div>
					</section>
		<!-- Footer -->
			<footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy; Alex Kalams. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>